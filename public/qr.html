// In the generateQR() function, update the status messages:
statusText.textContent = 'Generating WhatsApp QR Code...';
status.style.background = 'rgba(255, 0, 60, 0.1)';
status.style.borderColor = 'var(--primary)';

// When QR is generated successfully:
statusText.textContent = 'âœ… WhatsApp QR Code Generated! Scan within 3 minutes.';
status.style.background = 'rgba(0, 217, 255, 0.1)';
status.style.borderColor = 'var(--secondary)';

// Add this to show QR validity time:
const timerElement = document.createElement('div');
timerElement.id = 'qrTimer';
timerElement.style.color = '#aaa';
timerElement.style.fontSize = '0.9rem';
timerElement.style.marginTop = '10px';
document.querySelector('.qr-container').appendChild(timerElement);

// Timer function
function startQRTimer(duration = 180) { // 3 minutes
    let timer = duration;
    const timerElement = document.getElementById('qrTimer');
    
    const countdown = setInterval(() => {
        const minutes = Math.floor(timer / 60);
        const seconds = timer % 60;
        
        timerElement.textContent = `QR valid for: ${minutes}:${seconds.toString().padStart(2, '0')}`;
        
        if (timer <= 0) {
            clearInterval(countdown);
            timerElement.textContent = 'QR expired. Generate a new one.';
            timerElement.style.color = '#ff4444';
        } else if (timer <= 30) {
            timerElement.style.color = '#ffaa00';
        }
        
        timer--;
    }, 1000);
}

// Call it when QR is generated:
if (data.success) {
    startQRTimer(180); // 3 minutes
}
